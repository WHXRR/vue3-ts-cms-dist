import{u as j}from"./vue-router-60a88f34.js";import{d as y,j as i,aY as r,aQ as I,a9 as F,bu as l,c as e,bw as B,E as k,b8 as h,ab as D,ac as g,u as $,aT as E,aR as H}from"./@vue-3199b24e.js";import{u as p,a as N,i as Q,_ as O,__tla as V}from"./index-81bcbc0d.js";import{a6 as Y,a7 as z}from"./@ant-design-5e74ab0d.js";import"./pinia-d1156740.js";import"./dayjs-c16566d5.js";import"./ant-design-vue-bed7d465.js";import"./@babel-727ea1f3.js";import"./@ctrl-fb5a5473.js";import"./resize-observer-polyfill-3d106987.js";import"./@emotion-f7664732.js";import"./stylis-fad5b415.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-0b7bf9f6.js";import"./dom-align-ecb06dd6.js";import"./lodash-es-fa11e39e.js";import"./async-validator-7f96df71.js";import"./throttle-debounce-87e7e444.js";import"./axios-82afda87.js";import"./nprogress-afa1df2f.js";import"./vue-i18n-03843db8.js";import"./@intlify-f45a2def.js";let P,G=Promise.all([(()=>{try{return V}catch{}})()]).then(async()=>{const L="/login.png",U=y({__name:"AccountForm",emits:["handleLogin"],setup(_,{expose:b,emit:c}){const n=i(),t=i({name:p.getItem("cmsAccount")??"coderwhy",password:p.getItem("cmsPassword")??"123456"}),u=()=>new Promise((a,o)=>{n.value.validate().then(()=>{a(!0)}).catch(()=>{o(!1)})}),d=()=>{c("handleLogin")};return b({validateForm:u,accountFormState:t}),(a,o)=>{const s=r("a-input"),m=r("a-form-item"),v=r("a-input-password"),w=r("a-form");return I(),F(w,{model:t.value,ref_key:"accountFormRef",ref:n,"label-col":{span:6},"wrapper-col":{span:18},autocomplete:"off"},{default:l(()=>[e(m,{label:a.$t("login.userName"),name:"name",rules:[{required:!0,message:a.$t("login.pleaseInputAccount")}]},{default:l(()=>[e(s,{value:t.value.name,"onUpdate:value":o[0]||(o[0]=f=>t.value.name=f)},null,8,["value"])]),_:1},8,["label","rules"]),e(m,{label:a.$t("login.password"),name:"password",rules:[{required:!0,message:a.$t("login.pleaseInputPassword")}]},{default:l(()=>[e(v,{value:t.value.password,"onUpdate:value":o[1]||(o[1]=f=>t.value.password=f),onKeydown:B(d,["enter"])},null,8,["value","onKeydown"])]),_:1},8,["label","rules"])]),_:1},8,["model"])}}}),x=y({__name:"PhoneForm",setup(_,{expose:b}){const c=i(),n=i({phone:"",code:""});return b({validateForm:()=>new Promise((t,u)=>{c.value.validate().then(()=>{t(!0)}).catch(()=>{u(!1)})})}),(t,u)=>{const d=r("a-input"),a=r("a-form-item"),o=r("a-button"),s=r("a-input-group"),m=r("a-form");return I(),F(m,{model:n.value,ref_key:"phoneFormRef",ref:c,"label-col":{span:6},"wrapper-col":{span:18},autocomplete:"off"},{default:l(()=>[e(a,{label:t.$t("form.cellphone"),name:"phone",rules:[{required:!0,message:t.$t("login.pleaseInputPhone")}]},{default:l(()=>[e(d,{value:n.value.phone,"onUpdate:value":u[0]||(u[0]=v=>n.value.phone=v)},null,8,["value"])]),_:1},8,["label","rules"]),e(a,{label:t.$t("login.code"),name:"code",rules:[{required:!0,message:t.$t("login.pleaseInputCode")}]},{default:l(()=>[e(s,{compact:""},{default:l(()=>[e(d,{value:n.value.code,"onUpdate:value":u[1]||(u[1]=v=>n.value.code=v),style:{width:"56%"}},null,8,["value"]),e(o,{type:"primary"},{default:l(()=>[k(h(t.$t("login.getCode")),1)]),_:1})]),_:1})]),_:1},8,["label","rules"])]),_:1},8,["model"])}}}),A=_=>(E("data-v-ccbd6721"),_=_(),H(),_),K={class:"login-container"},R=A(()=>g("div",{class:"login-left"},[g("img",{class:"login-img",src:L,alt:""})],-1)),q={class:"login-right"},S={class:"login-box"},C={class:"remember-password"},T=y({__name:"LoginBox",setup(_){const b=j(),c=i("1"),n=i(),t=i(),u=i(!0),d=async()=>{var a,o;c.value==="1"&&((a=n.value)==null||a.validateForm().then(()=>{var s,m;u.value?(p.setItem("cmsAccount",(s=n.value)==null?void 0:s.accountFormState.name),p.setItem("cmsPassword",(m=n.value)==null?void 0:m.accountFormState.password)):(p.removeItem("cmsAccount"),p.removeItem("cmsPassword"))}),await N.accountLogin((o=n.value)==null?void 0:o.accountFormState).then(s=>{p.setItem("cmsToken",s.data.token),p.setItem("cmsUserID",s.data.id),Q().then(()=>{b.push("/main")})}).catch(s=>{console.warn(s)}))};return(a,o)=>{const s=r("a-tab-pane"),m=r("a-tabs"),v=r("a-checkbox"),w=r("a-button");return I(),D("div",K,[R,g("div",q,[g("div",S,[e(m,{activeKey:c.value,"onUpdate:activeKey":o[0]||(o[0]=f=>c.value=f),centered:""},{default:l(()=>[e(s,{key:"1"},{tab:l(()=>[e($(Y)),g("span",null,h(a.$t("login.passwordLogin")),1)]),default:l(()=>[e(U,{ref_key:"accountFormRef",ref:n,onHandleLogin:d},null,512)]),_:1}),e(s,{key:"2"},{tab:l(()=>[e($(z)),g("span",null,h(a.$t("login.phoneLogin")),1)]),default:l(()=>[e(x,{ref_key:"phoneFormRef",ref:t},null,512)]),_:1})]),_:1},8,["activeKey"]),g("div",C,[e(v,{checked:u.value,"onUpdate:checked":o[1]||(o[1]=f=>u.value=f)},{default:l(()=>[k(h(a.$t("login.rememberPassword")),1)]),_:1},8,["checked"])]),e(w,{class:"submit-btn",type:"primary",onClick:d},{default:l(()=>[k(h(a.$t("login.login")),1)]),_:1})])])])}}});P=O(T,[["__scopeId","data-v-ccbd6721"]])});export{G as __tla,P as default};
